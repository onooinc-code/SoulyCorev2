
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HedraCore v3: UI/UX & Communication Hub Feature Incubator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
        
        :root {
            --bg-color: #111827;
            --surface-color: #1c182c;
            --primary-color: #a450e8;
            --secondary-color: #00bcd4;
            --text-color: #e0e0e0;
            --header-color: #ffffff;
            --border-color: #3a3252;
            --shadow-color: rgba(164, 80, 232, 0.2);
            --success-color: #4caf50;
            --error-color: #f44336;
            --warning-color: #ff9800;
            --font-size-base: 1rem;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInRight { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            font-size: var(--font-size-base);
            transition: font-size 0.3s ease;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 80px 20px; background: linear-gradient(135deg, rgba(28, 24, 44, 0.9), rgba(18, 16, 28, 0.95)), url('https://www.transparenttextures.com/patterns/starring.png'); border-bottom: 3px solid var(--primary-color); margin-bottom: 50px; position: relative; overflow: hidden; }
        header h1 { font-size: 3.8em; color: var(--header-color); margin: 0; font-weight: 700; text-shadow: 0 0 20px var(--shadow-color); animation: fadeIn 1s ease-out; }
        header p { font-size: 1.4em; color: #b0a8d8; margin-top: 15px; animation: fadeIn 1.2s ease-out; }
        .section { animation: fadeIn 1s ease-out; animation-fill-mode: both; }
        h2 { font-size: 2.8em; color: var(--primary-color); border-bottom: 2px solid var(--border-color); padding-bottom: 15px; margin-top: 60px; margin-bottom: 30px; display: flex; align-items: center; gap: 15px; }
        h3 { font-size: 1.9em; color: var(--secondary-color); margin-top: 40px; margin-bottom: 20px; }
        .card { background-color: var(--surface-color); border-radius: 12px; padding: 25px 30px; margin-bottom: 25px; border: 1px solid var(--border-color); box-shadow: 0 8px 30px rgba(0,0,0,0.3); transition: transform 0.3s ease, box-shadow 0.3s ease; animation: slideInRight 0.8s ease-out; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 12px 40px var(--shadow-color); }
        .header-icon { width: 48px; height: 48px; color: var(--primary-color); flex-shrink: 0; }
        .card ul { padding-right: 20px; }
        .card code { font-family: monospace; background: #2a243e; padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.9em; color: #c792ea; direction: ltr; display: inline-block; }
        .arabic { font-family: 'Cairo', sans-serif; direction: rtl; }
        .feature-table th { position: sticky; top: 0; background: rgba(17, 24, 39, 0.9); backdrop-filter: blur(10px); z-index: 10;}
        .exp-panel summary { cursor: pointer; outline: none; transition: margin 0.2s ease; }
        .exp-panel summary::marker { color: #a5b4fc; }
        .exp-panel[open] summary { margin-bottom: 1rem; }
        .crazy-idea-card { transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
        .crazy-idea-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 0 30px rgba(79, 70, 229, 0.5); border-color: rgba(165, 180, 252, 0.5); }
        .floating-buttons { position: fixed; bottom: 20px; left: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
        .float-btn { background-color: var(--primary-color); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 24px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: background-color 0.3s ease, transform 0.2s ease; display: flex; justify-content: center; align-items: center; }
        .float-btn:hover { background-color: #8e44ad; transform: scale(1.1); }
        footer { text-align: center; margin-top: 80px; padding: 30px; border-top: 1px solid var(--border-color); color: #888; }
    </style>
</head>
<body class="arabic">

    <div class="floating-buttons" style="direction: ltr;">
        <button id="zoom-in" class="float-btn">+</button>
        <button id="zoom-out" class="float-btn">-</button>
    </div>

    <header>
        <h1 id="main-title"> حاضنة ميزات HedraCore</h1>
        <p id="main-subtitle">مقترحات لتحسينات الواجهة وتجربة المستخدم ومركز الاتصالات الجديد (v3)</p>
    </header>

    <div class="container">
        
        <main id="feature-app" class="card fade-in" style="animation-delay: 200ms; padding: 0; background: transparent; border: none; box-shadow: none;">
            <div class="p-6 border-b border-gray-700/50 flex flex-col sm:flex-row justify-between items-center gap-4 bg-[var(--surface-color)] rounded-t-lg">
                <h2 class="text-xl font-semibold m-0 p-0 border-none">سجل الميزات</h2>
                <button id="export-button" onclick="exportFeatures()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-500 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-indigo-500">
                    تصدير (<span id="selected-count">0</span>) إلى الحافظة
                </button>
            </div>

            <div class="overflow-y-auto" style="height: 80vh;">
                <!-- UI/UX Enhancements -->
                <div class="p-6">
                    <h3 class="text-2xl font-bold text-indigo-300 mb-4 arabic">تحسينات الواجهة وتجربة المستخدم (UI/UX)</h3>
                    <table class="min-w-full divide-y divide-gray-700/50 feature-table">
                        <thead class="bg-gray-800/50">
                            <tr>
                                <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-6"><input type="checkbox" onchange="toggleAll(this, 'uiux')" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-indigo-600 focus:ring-indigo-500"></th>
                                <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-white" style="direction: ltr;">Feature Name</th>
                                <th scope="col" class="px-3 py-3.5 text-right text-sm font-semibold text-white hidden md:table-cell arabic">الفئة</th>
                                <th scope="col" class="px-3 py-3.5 text-right text-sm font-semibold text-white arabic">الوصف والهدف</th>
                            </tr>
                        </thead>
                        <tbody id="feature-list-uiux" class="divide-y divide-gray-800 bg-gray-900/30"></tbody>
                    </table>
                </div>

                <!-- Communication Hub -->
                <div class="p-6">
                    <div class="h-px bg-indigo-500/30 my-8"></div>
                    <h3 class="text-2xl font-bold text-indigo-300 mb-4 arabic">مركز الاتصالات (Communication Hub)</h3>
                    <table class="min-w-full divide-y divide-gray-700/50 feature-table">
                        <thead class="bg-gray-800/50">
                            <tr>
                                <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-6"><input type="checkbox" onchange="toggleAll(this, 'comm')" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-indigo-600 focus:ring-indigo-500"></th>
                                <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-white" style="direction: ltr;">Feature Name</th>
                                <th scope="col" class="px-3 py-3.5 text-right text-sm font-semibold text-white hidden md:table-cell arabic">الفئة</th>
                                <th scope="col" class="px-3 py-3.5 text-right text-sm font-semibold text-white arabic">الوصف والهدف</th>
                            </tr>
                        </thead>
                        <tbody id="feature-list-comm" class="divide-y divide-gray-800 bg-gray-900/30"></tbody>
                    </table>
                </div>

                <!-- Arabic Explanations -->
                <div class="p-6 mt-4">
                    <div class="h-px bg-indigo-500/30 my-8"></div>
                    <h3 class="text-2xl font-bold text-center text-indigo-300 mb-6 arabic">شرح تفصيلي للخصائص مع أمثلة UI/UX</h3>
                    <div id="arabic-explanations" class="space-y-4"></div>
                </div>

                <!-- Crazy Ideas -->
                <div class="p-6 mt-4">
                     <div class="h-px bg-indigo-500/30 my-8"></div>
                     <h3 class="text-2xl font-bold text-center text-indigo-300 mb-6 arabic">أفكار إبداعية ومستقبلية "Crazy Ideas"</h3>
                     <div id="crazy-ideas-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </div>
            </div>
        </main>
    </div>

    <footer>
        <p>HedraCore Cognitive Architecture v3.0 - © 2025</p>
    </footer>
    
    <script>
        const uiuxFeatures = [
            { id: "ui1", category_en: "UI Style", name: "Command Palette", description_en: "A global 'Cmd+K' interface to quickly search for and execute any action in the app (e.g., 'New Chat', 'Open Memory Center', 'Toggle Logs').", business_goal_en: "To dramatically speed up navigation and actions for power users, reducing the need for mouse clicks.", category_ar: "أسلوب الواجهة", description_ar: "واجهة `Cmd+K` شاملة للبحث السريع وتنفيذ أي إجراء في التطبيق (محادثة جديدة، فتح الذاكرة).", example_ar: "الهدف: تسريع التنقل والإجراءات للمستخدمين المحترفين." },
            { id: "ui2", category_en: "UI Style", name: "Theming Engine", description_en: "Allow the user to switch between different themes (e.g., Light, Dark, Solarized) and potentially customize primary colors.", business_goal_en: "To improve user comfort and personalization, making the application more enjoyable for long work sessions.", category_ar: "أسلوب الواجهة", description_ar: "السماح للمستخدم بالتبديل بين سمات مختلفة (فاتح، داكن) وربما تخصيص الألوان الأساسية.", example_ar: "الهدف: تحسين راحة المستخدم وتخصيص التطبيق." },
            { id: "ui3", category_en: "UX", name: "Global Search", description_en: "A single search bar that searches across everything: conversation titles, message content, contacts, and semantic memory.", business_goal_en: "To create a single, powerful entry point for information retrieval, making it effortless to find anything in the system.", category_ar: "تجربة المستخدم", description_ar: "شريط بحث واحد يبحث في كل شيء: عناوين المحادثات، محتوى الرسائل، جهات الاتصال، والذاكرة الدلالية.", example_ar: "الهدف: إنشاء نقطة دخول قوية وموحدة لاسترجاع المعلومات." },
            { id: "ui4", category_en: "Navigation", name: "Tabbed Hubs", description_en: "Instead of opening full-screen modals, hubs like Memory Center or Dev Center open as persistent tabs in the main interface.", business_goal_en: "To improve multitasking by allowing users to quickly switch between their chat and management hubs without losing context.", category_ar: "التنقل", description_ar: "فتح المراكز (مثل مركز الذاكرة) في تبويبات دائمة بدلاً من نوافذ منبثقة تملأ الشاشة.", example_ar: "الهدف: تحسين تعدد المهام بالتبديل السريع بين الدردشة والمراكز." },
            { id: "ui5", category_en: "Navigation", name: "Seamless View Transitions", description_en: "Use shared layout animations (like Framer Motion's `layoutId`) for smooth transitions when an element moves between different views.", business_goal_en: "To create a more polished and professional user experience by visually connecting related elements across the UI.", category_ar: "التنقل", description_ar: "استخدام رسوم متحركة للانتقال السلس للعناصر عند تحركها بين طرق العرض المختلفة.", example_ar: "الهدف: إنشاء تجربة مستخدم أكثر احترافية وجاذبية." }
        ];

        const commFeatures = [
            // Core
            { id: "comm1", category_en: "Core", name: "Channel Registry & Dashboard", description_en: "A central dashboard to view, configure, and monitor the health of all communication channels (dynamic and static).", business_goal_en: "To provide a single source of truth for all communication integrations, simplifying management and troubleshooting.", category_ar: "البنية الأساسية", description_ar: "لوحة تحكم مركزية لعرض وتكوين ومراقبة صحة جميع قنوات الاتصال.", example_ar: "الهدف: توفير مصدر موثوق واحد لجميع تكاملات الاتصال." },
            { id: "comm2", category_en: "Core", name: "Unified Inbox", description_en: "A central inbox to view all incoming messages from all dynamic channels, with filtering by channel, status, and contact.", business_goal_en: "To streamline the process of monitoring and responding to incoming communications from various sources.", category_ar: "البنية الأساسية", description_ar: "صندوق وارد موحد لعرض جميع الرسائل الواردة من جميع القنوات الديناميكية.", example_ar: "الهدف: تبسيط عملية مراقبة الاتصالات الواردة." },
            { id: "comm3", category_en: "Core", name: "Message Template Engine", description_en: "Create reusable message templates with variables (e.g., `{{customer_name}}`) for different channels like WhatsApp, Email, etc.", business_goal_en: "To standardize and accelerate the process of sending personalized, routine communications.", category_ar: "البنية الأساسية", description_ar: "إنشاء قوالب رسائل قابلة لإعادة الاستخدام مع متغيرات لمختلف القنوات.", example_ar: "الهدف: توحيد وتسريع إرسال الاتصالات الروتينية." },
            // Dynamic Channels
            { id: "dyn1", category_en: "Dynamic Channels", name: "Webhook Channel Creator", description_en: "A UI that generates a unique webhook URL, allowing any external service to send data to the Communication Hub.", business_goal_en: "To provide a universal and flexible method for integrating with any third-party service that supports webhooks.", category_ar: "القنوات الديناميكية", description_ar: "واجهة مستخدم لإنشاء URL فريد لـ webhook، مما يسمح لأي خدمة خارجية بإرسال البيانات.", example_ar: "الهدف: توفير طريقة عالمية ومرنة للتكامل مع أي خدمة طرف ثالث." },
            { id: "dyn2", category_en: "Dynamic Channels", name: "Visual Payload Mapper", description_en: "A tool to visually map fields from an incoming JSON payload to internal system variables without writing code.", business_goal_en: "To empower non-technical users to set up and manage complex integrations by abstracting away the code.", category_ar: "القنوات الديناميكية", description_ar: "أداة لربط الحقول من حمولة JSON الواردة بمتغيرات النظام الداخلية بشكل مرئي.", example_ar: "الهدف: تمكين المستخدمين غير التقنيين من إعداد التكاملات." },
            { id: "dyn3", category_en: "Dynamic Channels", name: "Conditional Trigger Builder", description_en: "A rule engine UI to define 'IF-THEN' conditions based on the incoming payload that trigger actions (e.g., start a conversation, call a workflow).", business_goal_en: "To create intelligent automations that respond dynamically to different types of incoming data.", category_ar: "القنوات الديناميكية", description_ar: "واجهة لتعريف شروط 'IF-THEN' بناءً على الحمولة الواردة لتشغيل الإجراءات.", example_ar: "الهدف: إنشاء أتمتة ذكية تستجيب بشكل ديناميكي للبيانات." },
            // Static Channels
            { id: "stat1", category_en: "Static Channels", name: "App Client Broadcast Manager", description_en: "A UI to compose and send push notifications or in-app messages to our own application's clients.", business_goal_en: "To provide a direct communication channel for user engagement, announcements, and updates.", category_ar: "القنوات الثابتة", description_ar: "واجهة لكتابة وإرسال إشعارات أو رسائل داخل التطبيق لعملاء تطبيقنا.", example_ar: "الهدف: توفير قناة اتصال مباشرة لإشراك المستخدمين." },
            { id: "stat2", category_en: "Static Channels", name: "User Segmentation", description_en: "Ability to create user segments based on criteria (e.g., 'new users', 'power users') and target broadcasts to specific segments.", business_goal_en: "To increase the relevance and effectiveness of communications by targeting the right message to the right audience.", category_ar: "القنوات الثابتة", description_ar: "القدرة على إنشاء شرائح مستخدمين بناءً على معايير واستهدافهم برسائل محددة.", example_ar: "الهدف: زيادة فعالية الاتصالات باستهداف الجمهور المناسب." }
        ];
        
        const crazyIdeas = [
            { id: "ci1", name: "Conversational UI Builder", name_ar: "باني الواجهات الحوارية", description_ar: "بدلاً من النماذج الثابتة، تقوم ببناء واجهة المستخدم الخاصة بالمركز عبر محادثة. 'أضف قناة جديدة من نوع webhook، واجعلها تستجيب بـ JSON، وقم بتشغيل سير عمل X'.", example_ar: "الهدف: جعل عملية التكوين سريعة وبديهية للغاية." },
            { id: "ci2", name: "Adaptive Channel Throttling", name_ar: "التحكم التكيفي في القنوات", description_ar: "يتعلم النظام تلقائيًا حدود معدل الاستخدام (rate limits) لواجهات برمجة التطبيقات الخارجية ويضبط سرعة الإرسال ديناميكيًا لتجنب الحظر، مع زيادة السرعة عند الإمكان.", example_ar: "الهدف: تحقيق أقصى إنتاجية مع الحفاظ على استقرار التكامل." },
            { id: "ci3", name: "Cross-Channel Conversation Stitching", name_ar: "ربط المحادثات عبر القنوات", description_ar: "إذا بدأ مستخدم محادثة على WhatsApp ثم تابع عبر البريد الإلكتروني، يقوم النظام بالتعرف عليه ودمج المحادثتين في خيط واحد موحد.", example_ar: "الهدف: إنشاء تجربة مستخدم سلسة ومتكاملة بغض النظر عن القناة المستخدمة." }
        ];

        const uiMocks = {
            "ui1": `<div class="p-2 border border-dashed border-gray-600 rounded-md text-xs not-prose">
                        <div class="bg-gray-800 p-2 rounded-md shadow-lg">
                            <input type="text" placeholder="ابحث عن الإجراءات أو الملفات..." class="w-full bg-transparent text-white placeholder-gray-400 focus:outline-none"/>
                            <div class="mt-2 border-t border-gray-700 pt-2 text-gray-300">محادثة جديدة...</div>
                        </div>
                     </div>`,
            "ui4": `<div class="p-2 border border-dashed border-gray-600 rounded-md text-xs not-prose flex gap-1">
                        <div class="p-2 bg-gray-700 rounded-t-md">محادثة</div>
                        <div class="p-2 bg-indigo-600 text-white rounded-t-md">مركز الذاكرة</div>
                        <div class="p-2 bg-gray-700 rounded-t-md">مركز المطورين</div>
                     </div>`,
            "comm1": `<div class="p-2 border border-dashed border-gray-600 rounded-md text-xs not-prose space-y-2">
                         <div class="bg-gray-800 p-2 rounded flex justify-between items-center"><span>Webhook: New Lead</span> <span class="text-green-400">● نشط</span></div>
                         <div class="bg-gray-800 p-2 rounded flex justify-between items-center"><span>Static: App Notifications</span> <span class="text-green-400">● نشط</span></div>
                         <div class="bg-gray-800 p-2 rounded flex justify-between items-center"><span>Dynamic: WhatsApp</span> <span class="text-red-400">● خطأ في المصادقة</span></div>
                      </div>`,
            "dyn2": `<div class="p-2 border border-dashed border-gray-600 rounded-md text-xs not-prose flex items-center gap-2">
                        <div class="bg-gray-800 p-2 rounded w-1/2">
                            <p class="font-bold">Payload وارد</p>
                            <pre class="text-purple-300">{\n  "user": "Ali",\n  "issue": "Login failed"\n}</pre>
                        </div>
                        <div class="text-indigo-400">→</div>
                        <div class="bg-gray-800 p-2 rounded w-1/2">
                            <p class="font-bold">متغيرات النظام</p>
                            <p><code>{{contact_name}}</code> ← <code>payload.user</code></p>
                            <p><code>{{ticket_title}}</code> ← <code>payload.issue</code></p>
                        </div>
                     </div>`
        };
        
        function getPlausibleTechSpec(featureId) {
            const specs = {
                "ui1": `Component: CommandPalette.tsx\nState Management: Zustand or similar for global state.\nAction Registry: A central object mapping action names to functions.`,
                "ui4": `Library: A tab management library like 'react-tabs'.\nState: Stored in AppProvider to persist across the app.\nRouting: Optionally sync active tab with URL parameters.`,
                "comm1": `API Endpoint: GET /api/v2/comm/channels\nDB Table: 'comm_channels' with columns for type, config, status.\nHealth Check: A cron job that pings each channel's endpoint.`,
                "dyn1": `API Endpoint: POST /api/v2/comm/channels/webhook\nReturns: { "url": "https://.../webhook/{unique_id}", "status": "created" }\nBackend: A generic handler at /api/v2/webhook/{id} that routes to the trigger engine.`
            };
            return specs[featureId] || "API Endpoint: TBD\nRequest Body: TBD\nResponse: TBD";
        }

        function populateContent() {
            const allFeatures = [...uiuxFeatures, ...commFeatures];
            const listUiUx = document.getElementById('feature-list-uiux');
            const listComm = document.getElementById('feature-list-comm');
            const explanations = document.getElementById('arabic-explanations');
            const crazyList = document.getElementById('crazy-ideas-list');
            
            listUiUx.innerHTML = '';
            listComm.innerHTML = '';
            explanations.innerHTML = '';
            crazyList.innerHTML = '';

            uiuxFeatures.forEach(feature => {
                const trAr = document.createElement('tr');
                trAr.className = "hover:bg-gray-800/50 transition-all duration-200 hover:shadow-lg arabic";
                trAr.innerHTML = `
                    <td class="py-4 pl-4 pr-3 text-sm sm:pl-6"><input type="checkbox" name="feature" data-feature-id="${feature.id}" class="feature-checkbox h-4 w-4 rounded border-gray-600 bg-gray-700 text-indigo-600 focus:ring-indigo-500"></td>
                    <td class="px-3 py-4 text-sm font-medium text-white text-left" style="direction: ltr;"><a href="#exp-${feature.id}">${feature.name}</a></td>
                    <td class="px-3 py-4 text-sm text-gray-400 hidden md:table-cell">${feature.category_ar}</td>
                    <td class="px-3 py-4 text-sm text-gray-300">${feature.description_ar}<p class="text-indigo-400 italic text-xs mt-2">${feature.example_ar}</p></td>
                `;
                listUiUx.appendChild(trAr);
            });
            
            commFeatures.forEach(feature => {
                 const trAr = document.createElement('tr');
                trAr.className = "hover:bg-gray-800/50 transition-all duration-200 hover:shadow-lg arabic";
                trAr.innerHTML = `
                    <td class="py-4 pl-4 pr-3 text-sm sm:pl-6"><input type="checkbox" name="feature" data-feature-id="${feature.id}" class="feature-checkbox h-4 w-4 rounded border-gray-600 bg-gray-700 text-indigo-600 focus:ring-indigo-500"></td>
                    <td class="px-3 py-4 text-sm font-medium text-white text-left" style="direction: ltr;"><a href="#exp-${feature.id}">${feature.name}</a></td>
                    <td class="px-3 py-4 text-sm text-gray-400 hidden md:table-cell">${feature.category_ar}</td>
                    <td class="px-3 py-4 text-sm text-gray-300">${feature.description_ar}<p class="text-indigo-400 italic text-xs mt-2">${feature.example_ar}</p></td>
                `;
                listComm.appendChild(trAr);
            });

            allFeatures.forEach(feature => {
                const details = document.createElement('details');
                details.className = "card exp-panel transition-all duration-300 open:ring-2 open:ring-indigo-500/80";
                details.id = `exp-${feature.id}`;
                details.innerHTML = `
                    <summary class="font-semibold text-lg text-indigo-300 arabic flex justify-between items-center"><span>${feature.name}</span><span class="text-sm font-normal text-gray-400">${feature.category_ar}</span></summary>
                    <div class="mt-2 pt-3 border-t border-gray-700/50 arabic grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-bold text-gray-200 mb-2">الشرح</h4>
                            <p class="text-gray-300">${feature.description_ar}</p>
                            <p class="text-indigo-400 italic text-sm mt-3">${feature.example_ar}</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-200 mb-2">مثال واجهة المستخدم (UI/UX)</h4>
                            ${uiMocks[feature.id] || '<div class="p-2 border border-dashed border-gray-600 rounded-md text-xs text-gray-500">لا يوجد نموذج مرئي متاح</div>'}
                        </div>
                    </div>
                `;
                explanations.appendChild(details);
            });

            crazyIdeas.forEach(idea => {
                const div = document.createElement('div');
                div.className = "crazy-idea-card card";
                div.innerHTML = `
                    <h4 class="font-bold text-lg text-white mb-2" style="direction: ltr;">${idea.name}</h4>
                    <details class="exp-panel">
                        <summary class="font-semibold text-indigo-300 arabic">${idea.name_ar}</summary>
                        <div class="mt-2 pt-3 border-t border-gray-700/50 arabic">
                           <p class="text-sm text-gray-400">${idea.description_ar}</p>
                           <p class="text-indigo-400 italic text-xs mt-3">${idea.example_ar}</p>
                        </div>
                    </details>
                `;
                crazyList.appendChild(div);
            });
            
            attachEventListeners();
        }

        function attachEventListeners() {
            document.querySelectorAll('.feature-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedCount);
            });
        }
        
        function updateSelectedCount() {
            const count = document.querySelectorAll('.feature-checkbox:checked').length;
            document.getElementById('selected-count').textContent = count;
        }

        function toggleAll(masterCheckbox, tableType) {
            const tableId = tableType === 'uiux' ? 'feature-list-uiux' : 'feature-list-comm';
            document.querySelectorAll(`#${tableId} .feature-checkbox`).forEach(checkbox => {
                checkbox.checked = masterCheckbox.checked;
            });
            updateSelectedCount();
        }

        function exportFeatures() {
            const selectedIds = [...new Set(Array.from(document.querySelectorAll('.feature-checkbox:checked')).map(el => el.getAttribute('data-feature-id')))];
            const allFeatures = [...uiuxFeatures, ...commFeatures];
            
            if (selectedIds.length === 0) {
                alert("لم يتم تحديد أي ميزات للتصدير.");
                return;
            }

            let exportText = "AI Agent Task: Analyze the following feature specifications for HedraCore and generate a project implementation plan.\n\n---\n\n";
            
            selectedIds.forEach(id => {
                const feature = allFeatures.find(f => f.id === id);
                if (feature) {
                    exportText += `FEATURE: ${feature.name}\n`;
                    exportText += `== ENGLISH DETAILS ==\n`;
                    exportText += `Category: ${feature.category_en}\n`;
                    exportText += `Description: ${feature.description_en}\n`;
                    exportText += `Business Goal: ${feature.business_goal_en}\n\n`;
                    exportText += `== ARABIC DETAILS ==\n`;
                    exportText += `Category: ${feature.category_ar}\n`;
                    exportText += `Description: ${feature.description_ar}\n\n`;
                    exportText += `== TECHNICAL SPEC (PLAUSIBLE) ==\n`;
                    exportText += `${getPlausibleTechSpec(feature.id)}\n\n`;
                    exportText += `---\n\n`;
                }
            });

            navigator.clipboard.writeText(exportText).then(() => {
                const exportButton = document.getElementById('export-button');
                const originalText = exportButton.innerHTML;
                exportButton.innerHTML = `تم نسخ ${selectedIds.length} ميزة!`;
                exportButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-500');
                exportButton.classList.add('bg-green-600');
                setTimeout(() => {
                    exportButton.innerHTML = originalText;
                    exportButton.classList.add('bg-indigo-600', 'hover:bg-indigo-500');
                    exportButton.classList.remove('bg-green-600');
                    updateSelectedCount();
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
                alert('فشل نسخ الميزات إلى الحافظة.');
            });
        }

        document.addEventListener('DOMContentLoaded', populateContent);
        
        document.addEventListener('DOMContentLoaded', () => {
            const zoomInBtn = document.getElementById('zoom-in');
            const zoomOutBtn = document.getElementById('zoom-out');
            const body = document.body;
            let currentFontSize = 1;
            zoomInBtn.addEventListener('click', () => { currentFontSize += 0.1; body.style.setProperty('--font-size-base', `${currentFontSize}rem`); });
            zoomOutBtn.addEventListener('click', () => { if (currentFontSize > 0.5) { currentFontSize -= 0.1; body.style.setProperty('--font-size-base', `${currentFontSize}rem`); } });
        });
    </script>
</body>
</html>
